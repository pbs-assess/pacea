# Introduction

## Acknowledgments

- Co-authors: Joe Watson, Angelica Peña, Andrea Hilborn, Charles Hannah, and Chris
Rooper.

- Kelsey Flynn, Jessica Nephin, Lindsay Davidson, Strahan Tucker, Brianna Wright, Patrick
Thompson, Matt Grinnell, Sean Anderson, Philina English, Chris Grandin, and others for earlier feedback at the planning stage.

- Carley Colclough for designing the logo.

- DFO's Competitive Science Research Fund for funding (project 21-FS-03-13).

## Motivation

- Revised Fisheries Act: “... the Minister shall take into account the environmental conditions affecting a fish stock."

- `r colorize("Yet <50\\% of DFO’s stock assessments currently use environmental data.", "blue")`

- Only 28% of assessments in Pacific Region use environmental data.

- `r colorize("Leading cause of not using environmental data is availability of the data.", "red")`

  \

\footnotesize

Kulka et al. (2022). An Accounting of Integration of Environmental Variables in Fishery Stock Assessments in Canada. Can. Tech. Rep. Fish. Aquat. Sci. 3473: viii + 79 p.
https://publications.gc.ca/collections/collection_2022/mpo-dfo/Fs97-6-3473-eng.pdf

\normalsize

## Motivation

- Outputs from a BC physical biogeochemical model have been shared by Angelica Peña.

- But still requires extensive coding to convert results from netCDF files into R.

- Open Data is great, but can be hard to create raw data into usable information.

- Hence, the `pacea` R package, motivated by Dan Duplisea's `GSLea` package for the Gulf of St. Lawrence.

- Primary audience is DFO stock assessment scientists, but usable by anyone (need minimal working knowledge of R).

  \

\footnotesize

Duplisea et al. (2020). gslea: the Gulf of St Lawrence ecosystem
approach data matrix R-package. R package version 0.1 https://github.com/duplisea/gslea

\normalsize

## Why an R package?

- R is the programming language most widely used by stock assessment scientists.

- An R package is the standard way to share code (and data).

- Easy installation:

\textcolor{red}{\texttt{remotes::install\_github("pbs-assess/pacea")}}


- Ensures proper documentation of data objects and functions (helps users).

- Include vignettes which walk users through various features.

- All data (except one type) is saved within the package, no further downloading
  required.

## Why an R package on GitHub?

- Can host freely on GitHub -- code is completely open source.

- Standard way to collaborate on code.

```{r whyR, echo=FALSE, out.width="40%"}
knitr::include_graphics(paste0(here::here(),
                               "/talks/talks-manual-figures/github-screenshot-small.png"))
```

- 'Passing' badge: ensures package can build in R.

- 'codecov' is the amount of the code that is covered by unit tests, which help weed
  out bugs.


## ideas

describe the data currently contained, demonstrate the plotting functions and how to access the data, and mention caveats, assumptions, and problems encountered (and solved, so you don't have to!) when wrangling certain data sets.



##
```{r motivation1, echo=FALSE, out.width = "100%"}
knitr::include_graphics(paste0(here::here(),
                               "/talks/talks-manual-figures/motivation-1.png"))
```

##
```{r motivation2, echo=FALSE, out.width = "100%"}
knitr::include_graphics(paste0(here::here(),
                               "/talks/talks-manual-figures/motivation-2.png"))
```

## Motivation (based on a true story)

A search for sea surface temperature yields an overwhelming number (341) of choices:

```{r motivation4, echo=FALSE, out.width = "90%"}
knitr::include_graphics(paste0(here::here(),
                               "/talks/talks-manual-figures/motivation3.png"))
```

Likely requires extensive data wrangling to be usable, which usually takes way,
way, longer than anticipated.

So the SST analysis did not happen.

## Guidelines for users

Read the README!!

Check the NEWS!!

We have built comprehensive vignettes and help files for each type of data object in `pacea`.

Please go through them as this will be how to really understand the details.

For any simple questions just contact us. For detailed questions or bug reports
please post an `Issue` on GitHub and a minimum working example:

 - often helps you figure out the answer
 - using `Issues` allow you to first check if we are already working on it
 - allows others to see (and maybe help answer) questions being asked

We will describe updates to `pacea` in the NEWS, such as updating certain data
sets and adding new ones.


## `pacea` objects

Currently, pacea contains:

- `r format(nrow(buoy_sst), big.mark = ",")` calculations of daily sea surface
   temperature based on data from `r nrow(buoy_metadata)` buoys

- outputs from the spatial British Columbia continental margin (BCCM) model

- NOAA's spatial Optimum Interpolation Sea Surface Temperature (OISST) record

- 9 climatic and oceanographic indices, such as the Pacific Decadal Oscillation
   and those related to El Niño

- estimates of abundances for Harbour Seals and Pacific Hake.
